(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[220],{1409:(e,s,a)=>{Promise.resolve().then(a.bind(a,2945))},2800:(e,s,a)=>{"use strict";a.d(s,{A:()=>i});var t=a(2115),l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=(e,s)=>{let a=(0,t.forwardRef)((a,i)=>{let{color:c="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:d,children:m,...x}=a;return(0,t.createElement)("svg",{ref:i,...l,width:n,height:n,stroke:c,strokeWidth:d?24*Number(o)/Number(n):o,className:"lucide lucide-".concat(r(e)),...x},[...s.map(e=>{let[s,a]=e;return(0,t.createElement)(s,a)}),...(Array.isArray(m)?m:[m])||[]])});return a.displayName="".concat(e),a}},7364:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(2800).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},8867:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(2800).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},2823:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(2800).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},6046:(e,s,a)=>{"use strict";var t=a(6658);a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(s,{useSearchParams:function(){return t.useSearchParams}})},2945:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>p});var t=a(5155),l=a(2115),r=a(6046),i=a(8867),c=a(2800);let n=(0,c.A)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),o=(0,c.A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var d=a(2823);let m=(0,c.A)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var x=a(7364),u=a(1567);let h=[{id:"basic",name:"Basic",price:12,priceDisplay:"$12",badge:"",features:["Telemedicina 24/7 ilimitada","Descuentos en farmacias (hasta 80%)","Chat m\xe9dico por WhatsApp","1-4 familiares incluidos","Historial m\xe9dico digital","Recetas electr\xf3nicas"]},{id:"premium",name:"Premium",price:18,priceDisplay:"$18",badge:"M\xe1s Popular",features:["Todo lo del plan Basic","Terapia psicol\xf3gica (2 sesiones/mes)","Descuentos en especialistas","Ex\xe1menes de laboratorio","Consultas prioritarias","Descuentos en estudios"]}];function p(){let e=(0,r.useRouter)(),[s,a]=(0,l.useState)("premium"),[c,p]=(0,l.useState)(1),[g,f]=(0,l.useState)(!1),[b,y]=(0,l.useState)("");(0,l.useEffect)(()=>{var s;let a=sessionStorage.getItem("sc_datos_migrante"),t=sessionStorage.getItem("sc_datos_familia");if(!a||!t){e.push("/");return}p(1+((null===(s=JSON.parse(t).usuariosAdicionales)||void 0===s?void 0:s.length)||0))},[e]);let j=h.find(e=>e.id===s),N=(null==j?void 0:j.price)||0,v=async a=>{a.preventDefault(),f(!0),y("");try{JSON.parse(sessionStorage.getItem("sc_registro_inicial")||"{}");let a=JSON.parse(sessionStorage.getItem("sc_datos_migrante")||"{}"),t=JSON.parse(sessionStorage.getItem("sc_datos_familia")||"{}"),l={suscriptor:{nombre:a.nombreCompleto,email:a.email,telefono:a.telefonoUS,estadoUSA:a.estadoUS},usuarioPrincipal:t.usuarioPrincipal,usuariosAdicionales:t.usuariosAdicionales||[],plan:{id:s,name:(null==j?void 0:j.name)||"",price:N}};console.log("Enviando registro:",l);let r=await fetch("/api/registro",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}),i=await r.json();if(!r.ok)throw Error(i.error||"Error al crear el registro");console.log("Registro exitoso:",i),sessionStorage.setItem("sc_registration_id",i.registrationId),sessionStorage.setItem("sc_codigo_familia",i.codigoFamilia),i.checkoutUrl?window.location.href=i.checkoutUrl:e.push("/dashboard?nuevo=true&codigo=".concat(i.codigoFamilia))}catch(e){console.error("Error en registro:",e),y(e instanceof Error?e.message:"Error al procesar el registro")}finally{f(!1)}};return(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:[(0,t.jsx)("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-sc-gray",children:"SaludCompartida"}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Paso 4 de 4"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("div",{className:"flex-1 h-2 bg-sc-cyan rounded-full"}),(0,t.jsx)("div",{className:"flex-1 h-2 bg-sc-cyan rounded-full"}),(0,t.jsx)("div",{className:"flex-1 h-2 bg-sc-cyan rounded-full"}),(0,t.jsx)("div",{className:"flex-1 h-2 bg-sc-cyan rounded-full"})]})]})}),(0,t.jsxs)("main",{className:"max-w-6xl mx-auto px-4 py-12",children:[(0,t.jsxs)("div",{className:"text-center mb-12",children:[(0,t.jsx)("h2",{className:"text-4xl font-bold text-sc-gray mb-3",children:"Elige tu plan"}),(0,t.jsxs)("p",{className:"text-xl text-gray-600",children:["Protecci\xf3n de salud para ",c," ",1===c?"persona":"personas"]})]}),(0,t.jsxs)("form",{onSubmit:v,children:[(0,t.jsx)("div",{className:"grid md:grid-cols-2 gap-8 mb-12",children:h.map(e=>{let l=s===e.id;return(0,t.jsxs)("div",{onClick:()=>a(e.id),className:"card-sc cursor-pointer transition-all ".concat(l?"ring-4 ring-sc-cyan shadow-2xl scale-105":"hover:shadow-xl hover:scale-102"),children:[e.badge&&(0,t.jsx)("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:(0,t.jsx)("span",{className:"bg-sc-orange text-white px-4 py-1 rounded-full text-sm font-semibold",children:e.badge})}),(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)("h3",{className:"text-2xl font-bold text-sc-gray mb-2",children:e.name}),(0,t.jsxs)("div",{className:"flex items-baseline justify-center gap-1",children:[(0,t.jsx)("span",{className:"text-5xl font-bold text-sc-cyan",children:e.priceDisplay}),(0,t.jsx)("span",{className:"text-gray-600",children:"/mes"})]})]}),(0,t.jsx)("ul",{className:"space-y-3 mb-6",children:e.features.map((e,s)=>(0,t.jsxs)("li",{className:"flex items-start gap-3",children:[(0,t.jsx)(i.A,{className:"w-5 h-5 mt-0.5 flex-shrink-0 ".concat(l?"text-sc-cyan":"text-green-500")}),(0,t.jsx)("span",{className:"text-gray-700",children:e})]},s))}),(0,t.jsx)("button",{type:"button",onClick:()=>a(e.id),className:"w-full py-3 rounded-lg font-semibold transition-all ".concat(l?"bg-sc-cyan text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:l?(0,t.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,t.jsx)(i.A,{className:"w-5 h-5"}),"Plan Seleccionado"]}):"Seleccionar Plan"})]},e.id)})}),(0,t.jsxs)("div",{className:"max-w-2xl mx-auto card-sc bg-gradient-to-br from-sc-cyan to-blue-600 text-white",children:[(0,t.jsx)("h3",{className:"text-2xl font-bold mb-6",children:"Resumen del Pedido"}),(0,t.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-blue-100",children:"Plan seleccionado:"}),(0,t.jsx)("span",{className:"font-semibold text-xl",children:null==j?void 0:j.name})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-blue-100",children:"Personas incluidas:"}),(0,t.jsx)("span",{className:"font-semibold",children:c})]}),(0,t.jsx)("div",{className:"h-px bg-white/20 my-4"}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-2xl",children:[(0,t.jsx)("span",{children:"Cargo mensual:"}),(0,t.jsxs)("span",{className:"font-bold",children:[(0,u.az)(N),"/mes"]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-3xl",children:[(0,t.jsx)("span",{children:"Total hoy:"}),(0,t.jsx)("span",{className:"font-bold",children:(0,u.az)(N)})]})]}),(0,t.jsxs)("div",{className:"flex justify-center gap-6 mb-6 pt-6 border-t border-white/20",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n,{className:"w-5 h-5"}),(0,t.jsx)("span",{className:"text-sm",children:"Pago Seguro"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(o,{className:"w-5 h-5"}),(0,t.jsx)("span",{className:"text-sm",children:"Cancela cuando quieras"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(d.A,{className:"w-5 h-5"}),(0,t.jsx)("span",{className:"text-sm",children:"1247+ Familias"})]})]}),b&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-300 rounded-lg text-red-700 text-sm",children:b}),(0,t.jsx)("button",{type:"submit",disabled:g,className:"w-full bg-white text-sc-cyan py-4 rounded-lg font-bold text-lg hover:bg-gray-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3",children:g?"Procesando...":(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m,{className:"w-6 h-6"}),"Pagar ",(0,u.az)(N)]})}),(0,t.jsx)("p",{className:"text-center text-sm text-blue-100 mt-4",children:"Al continuar, aceptas nuestros t\xe9rminos y condiciones"})]}),(0,t.jsx)("div",{className:"text-center mt-8",children:(0,t.jsxs)("button",{type:"button",onClick:()=>e.back(),className:"btn-outline",disabled:g,children:[(0,t.jsx)(x.A,{className:"w-4 h-4 mr-2"}),"Volver a editar datos de familia"]})})]}),(0,t.jsxs)("div",{className:"mt-12 text-center",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"M\xe9todos de pago aceptados:"}),(0,t.jsxs)("div",{className:"flex justify-center gap-6 items-center flex-wrap",children:[(0,t.jsx)("div",{className:"text-gray-400 font-semibold",children:"Visa"}),(0,t.jsx)("div",{className:"text-gray-400 font-semibold",children:"Mastercard"}),(0,t.jsx)("div",{className:"text-gray-400 font-semibold",children:"American Express"}),(0,t.jsx)("div",{className:"text-gray-400 font-semibold",children:"Apple Pay"}),(0,t.jsx)("div",{className:"text-gray-400 font-semibold",children:"Google Pay"})]})]})]})]})}},1567:(e,s,a)=>{"use strict";function t(e){let s=e.replace(/\D/g,"");return s.length<=3?"+1 ".concat(s):s.length<=6?"+1 ".concat(s.slice(0,3)," ").concat(s.slice(3)):"+1 ".concat(s.slice(0,3)," ").concat(s.slice(3,6)," ").concat(s.slice(6,10))}function l(e){let s=e.replace(/\D/g,"");return s.length<=3?"+52 ".concat(s):s.length<=6?"+52 ".concat(s.slice(0,3)," ").concat(s.slice(3)):"+52 ".concat(s.slice(0,3)," ").concat(s.slice(3,6)," ").concat(s.slice(6,10))}function r(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}a.d(s,{RW:()=>t,az:()=>r,lJ:()=>l})}},e=>{var s=s=>e(e.s=s);e.O(0,[441,517,358],()=>s(1409)),_N_E=e.O()}]);