(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[596],{9263:(e,a,t)=>{Promise.resolve().then(t.bind(t,4326))},2800:(e,a,t)=>{"use strict";t.d(a,{A:()=>c});var s=t(2115),l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),c=(e,a)=>{let t=(0,s.forwardRef)((t,c)=>{let{color:n="currentColor",size:o=24,strokeWidth:i=2,absoluteStrokeWidth:d,children:m,...p}=t;return(0,s.createElement)("svg",{ref:c,...l,width:o,height:o,stroke:n,strokeWidth:d?24*Number(i)/Number(o):i,className:"lucide lucide-".concat(r(e)),...p},[...a.map(e=>{let[a,t]=e;return(0,s.createElement)(a,t)}),...(Array.isArray(m)?m:[m])||[]])});return t.displayName="".concat(e),t}},7364:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(2800).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9053:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(2800).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},3831:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(2800).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},1466:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(2800).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},2823:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(2800).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},767:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(2800).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6046:(e,a,t)=>{"use strict";var s=t(6658);t.o(s,"useRouter")&&t.d(a,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(a,{useSearchParams:function(){return s.useSearchParams}})},4326:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>f});var s=t(5155),l=t(2115),r=t(6046),c=t(2823),n=t(2800);let o=(0,n.A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);var i=t(1466),d=t(3831),m=t(767);let p=(0,n.A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var u=t(7364),h=t(9053),x=t(1567);let b=["Madre","Padre","Esposo/a","Hijo/a","Hermano/a","Abuelo/a","T\xedo/a","Primo/a","Otro familiar"];function f(){let e=(0,r.useRouter)(),[a,t]=(0,l.useState)({nombre:"",telefono:"",parentesco:""}),[n,f]=(0,l.useState)([]),[g,j]=(0,l.useState)({}),[y,N]=(0,l.useState)(!1);(0,l.useEffect)(()=>{if(!sessionStorage.getItem("sc_datos_migrante")){e.push("/registro/datos-migrante");return}let a=sessionStorage.getItem("sc_datos_familia");if(a){let e=JSON.parse(a);t(e.usuarioPrincipal||{nombre:"",telefono:"",parentesco:""}),f(e.usuariosAdicionales||[])}},[e]);let v=(e,a)=>{"telefono"===e&&(a=(0,x.lJ)(a)),t(t=>({...t,[e]:a})),g["principal_".concat(e)]&&j(a=>({...a,["principal_".concat(e)]:""}))},_=(e,a,t)=>{"telefono"===a&&(t=(0,x.lJ)(t));let s=[...n];s[e]={...s[e],[a]:t},f(s),g["adicional_".concat(e,"_").concat(a)]&&j(t=>({...t,["adicional_".concat(e,"_").concat(a)]:""}))},k=e=>{f(n.filter((a,t)=>t!==e));let a={...g};Object.keys(a).forEach(t=>{t.startsWith("adicional_".concat(e,"_"))&&delete a[t]}),j(a)},A=()=>{let e={};a.nombre.trim()||(e.principal_nombre="El nombre es requerido");let t=a.telefono.replace(/\D/g,"");return t?12===t.length&&t.startsWith("52")||(e.principal_telefono="Debe ser un tel\xe9fono v\xe1lido de M\xe9xico (+52)"):e.principal_telefono="El tel\xe9fono es requerido",a.parentesco||(e.principal_parentesco="Selecciona el parentesco"),n.forEach((a,t)=>{if(a.nombre.trim()||a.telefono.trim()||a.parentesco){a.nombre.trim()||(e["adicional_".concat(t,"_nombre")]="El nombre es requerido");let s=a.telefono.replace(/\D/g,"");s?12===s.length&&s.startsWith("52")||(e["adicional_".concat(t,"_telefono")]="Tel\xe9fono inv\xe1lido de M\xe9xico"):e["adicional_".concat(t,"_telefono")]="El tel\xe9fono es requerido",a.parentesco||(e["adicional_".concat(t,"_parentesco")]="Selecciona el parentesco")}}),j(e),0===Object.keys(e).length},w=async t=>{if(t.preventDefault(),A()){N(!0);try{let t=n.filter(e=>e.nombre.trim()&&e.telefono.trim()&&e.parentesco);sessionStorage.setItem("sc_datos_familia",JSON.stringify({usuarioPrincipal:a,usuariosAdicionales:t})),e.push("/registro/plan")}catch(e){console.error("Error:",e),alert("Ocurri\xf3 un error. Intenta de nuevo.")}finally{N(!1)}}},S=1+n.filter(e=>e.nombre.trim()).length;return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:[(0,s.jsx)("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-sc-gray",children:"SaludCompartida"}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Paso 3 de 4"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("div",{className:"flex-1 h-2 bg-sc-cyan rounded-full"}),(0,s.jsx)("div",{className:"flex-1 h-2 bg-sc-cyan rounded-full"}),(0,s.jsx)("div",{className:"flex-1 h-2 bg-sc-cyan rounded-full"}),(0,s.jsx)("div",{className:"flex-1 h-2 bg-gray-200 rounded-full"})]})]})}),(0,s.jsxs)("main",{className:"max-w-2xl mx-auto px-4 py-12",children:[(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-3xl font-bold text-sc-gray mb-2",children:"Tu familia en M\xe9xico"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Registra a las personas que tendr\xe1n acceso a los servicios de salud."})]}),(0,s.jsxs)("div",{className:"counter-badge",children:[(0,s.jsx)(c.A,{className:"w-5 h-5"}),(0,s.jsxs)("span",{className:"font-bold",children:[S," de 4"]})]})]})}),(0,s.jsxs)("form",{onSubmit:w,className:"space-y-8",children:[(0,s.jsxs)("div",{className:"card-sc",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(o,{className:"w-5 h-5 text-sc-magenta"}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-sc-gray",children:"Usuario Principal"}),(0,s.jsx)("span",{className:"badge-sm badge-primary ml-auto",children:"Requerido"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"principal_nombre",className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,s.jsx)(i.A,{className:"inline w-4 h-4 mr-1"}),"Nombre Completo"]}),(0,s.jsx)("input",{type:"text",id:"principal_nombre",value:a.nombre,onChange:e=>v("nombre",e.target.value),className:"input-sc ".concat(g.principal_nombre?"border-red-500":""),placeholder:"Mar\xeda Gonz\xe1lez L\xf3pez"}),g.principal_nombre&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:g.principal_nombre})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"principal_telefono",className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,s.jsx)(d.A,{className:"inline w-4 h-4 mr-1"}),"Tel\xe9fono en M\xe9xico"]}),(0,s.jsx)("input",{type:"tel",id:"principal_telefono",value:a.telefono,onChange:e=>v("telefono",e.target.value),className:"input-sc ".concat(g.principal_telefono?"border-red-500":""),placeholder:"+52 55 1234 5678"}),g.principal_telefono&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:g.principal_telefono})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"principal_parentesco",className:"block text-sm font-medium text-gray-700 mb-2",children:"Parentesco"}),(0,s.jsxs)("select",{id:"principal_parentesco",value:a.parentesco,onChange:e=>v("parentesco",e.target.value),className:"input-sc ".concat(g.principal_parentesco?"border-red-500":""),children:[(0,s.jsx)("option",{value:"",children:"Selecciona el parentesco"}),b.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),g.principal_parentesco&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:g.principal_parentesco})]})]})]}),n.map((e,a)=>(0,s.jsxs)("div",{className:"card-sc relative",children:[(0,s.jsx)("button",{type:"button",onClick:()=>k(a),className:"absolute top-4 right-4 text-gray-400 hover:text-red-500 transition-colors",title:"Eliminar",children:(0,s.jsx)(m.A,{className:"w-5 h-5"})}),(0,s.jsxs)("h3",{className:"text-lg font-semibold text-sc-gray mb-4",children:["Familiar Adicional #",a+1]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,s.jsx)(i.A,{className:"inline w-4 h-4 mr-1"}),"Nombre Completo"]}),(0,s.jsx)("input",{type:"text",value:e.nombre,onChange:e=>_(a,"nombre",e.target.value),className:"input-sc ".concat(g["adicional_".concat(a,"_nombre")]?"border-red-500":""),placeholder:"Nombre completo"}),g["adicional_".concat(a,"_nombre")]&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:g["adicional_".concat(a,"_nombre")]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,s.jsx)(d.A,{className:"inline w-4 h-4 mr-1"}),"Tel\xe9fono en M\xe9xico"]}),(0,s.jsx)("input",{type:"tel",value:e.telefono,onChange:e=>_(a,"telefono",e.target.value),className:"input-sc ".concat(g["adicional_".concat(a,"_telefono")]?"border-red-500":""),placeholder:"+52 55 1234 5678"}),g["adicional_".concat(a,"_telefono")]&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:g["adicional_".concat(a,"_telefono")]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Parentesco"}),(0,s.jsxs)("select",{value:e.parentesco,onChange:e=>_(a,"parentesco",e.target.value),className:"input-sc ".concat(g["adicional_".concat(a,"_parentesco")]?"border-red-500":""),children:[(0,s.jsx)("option",{value:"",children:"Selecciona el parentesco"}),b.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),g["adicional_".concat(a,"_parentesco")]&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:g["adicional_".concat(a,"_parentesco")]})]})]})]},a)),n.length<3&&(0,s.jsxs)("button",{type:"button",onClick:()=>{n.length<3&&f([...n,{nombre:"",telefono:"",parentesco:""}])},className:"w-full btn-outline",children:[(0,s.jsx)(p,{className:"w-5 h-5 mr-2"}),"Agregar Familiar Adicional (",3-n.length," disponibles)"]}),(0,s.jsxs)("div",{className:"flex gap-4 pt-6",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>e.back(),className:"btn-outline flex-1",disabled:y,children:[(0,s.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Atr\xe1s"]}),(0,s.jsxs)("button",{type:"submit",className:"btn-primary flex-1",disabled:y,children:[y?"Guardando...":"Continuar",(0,s.jsx)(h.A,{className:"w-4 h-4 ml-2"})]})]})]}),(0,s.jsx)("div",{className:"mt-8 p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,s.jsxs)("p",{className:"text-sm text-green-800",children:[(0,s.jsx)("strong",{children:"\uD83D\uDC9A Incluye hasta 4 personas"}),(0,s.jsx)("br",{}),"El usuario principal es quien recibir\xe1 las notificaciones principales. Puedes agregar hasta 3 familiares adicionales."]})})]})]})}},1567:(e,a,t)=>{"use strict";function s(e){let a=e.replace(/\D/g,"");return a.length<=3?"+1 ".concat(a):a.length<=6?"+1 ".concat(a.slice(0,3)," ").concat(a.slice(3)):"+1 ".concat(a.slice(0,3)," ").concat(a.slice(3,6)," ").concat(a.slice(6,10))}function l(e){let a=e.replace(/\D/g,"");return a.length<=3?"+52 ".concat(a):a.length<=6?"+52 ".concat(a.slice(0,3)," ").concat(a.slice(3)):"+52 ".concat(a.slice(0,3)," ").concat(a.slice(3,6)," ").concat(a.slice(6,10))}function r(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}t.d(a,{RW:()=>s,az:()=>r,lJ:()=>l})}},e=>{var a=a=>e(e.s=a);e.O(0,[441,517,358],()=>a(9263)),_N_E=e.O()}]);